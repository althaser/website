<header
  class="nav flex flex-row row py-2 mb-6 w-full border-b border-gray-300 dark:border-gray-700 justify-between"
>
  <div>
    <a class="no-underline p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-800" href="{{ .Site.BaseURL }}">Home</a>
    <a class="no-underline p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-800" href="{{ `blog` | relURL }}">Blog</a>
  </div>

  <!-- <i
    class="fas fa-sun theme-toggle text-blue-500 hover:text-blue-700 dark:text-yellow-300 dark:hover:text-yellow-500 cursor-pointer text-lg mr-9 sm:mr-0"
    onclick="lightDark(this)"
  ></i> -->
  <i class="fas theme-toggle text-blue-500 hover:text-blue-700 dark:text-yellow-300 dark:hover:text-yellow-500 cursor-pointer text-lg mr-9 sm:mr-0"></i>
</header>

<!-- <script>
  const lightDark = (el) => {
    let html = document.querySelector("html");
    if (html.classList.contains("dark")) {
      html.classList.remove("dark");
      el.classList.add("fa-moon");
      el.classList.remove("fa-sun");
      window.localStorage.setItem("theme", "light");
      // console.log("light then moon");
    } else {
      html.classList.add("dark");
      el.classList.add("fa-sun");
      el.classList.remove("fa-moon");
      window.localStorage.setItem("theme", "dark");
      // console.log("dark then sun");
    }
  };
</script> -->

<!-- <script>
  const lightDark = (el) => {
    let html = document.querySelector("html");
    if (html.classList.contains("dark")) {
      html.classList.remove("dark");
      el.classList.add("fa-moon");
      el.classList.remove("fa-sun");
      window.localStorage.setItem("theme", "light");
    } else {
      html.classList.add("dark");
      el.classList.add("fa-sun");
      el.classList.remove("fa-moon");
      window.localStorage.setItem("theme", "dark");
    }
  };

  // Check theme on page load and set the theme toggle icon accordingly
  window.onload = () => {
    let themeToggle = document.querySelector(".theme-toggle");
    let theme = window.localStorage.getItem("theme");
    if (theme === "dark") {
      themeToggle.classList.remove("fa-moon");
      themeToggle.classList.add("fa-sun");
    } else {
      themeToggle.classList.remove("fa-sun");
      themeToggle.classList.add("fa-moon");
    }
  };
</script> -->


<script>
  // Function to toggle theme
  const toggleTheme = () => {
    let html = document.querySelector("html");
    let themeToggle = document.querySelector(".theme-toggle");
    let theme = window.localStorage.getItem("theme");

    if (theme === "dark") {
      html.classList.remove("dark");
      themeToggle.classList.remove("fa-sun");
      themeToggle.classList.add("fa-moon");
      window.localStorage.setItem("theme", "light");
    } else {
      html.classList.add("dark");
      themeToggle.classList.add("fa-sun");
      themeToggle.classList.remove("fa-moon");
      window.localStorage.setItem("theme", "dark");
    }
  };

  // Function to set initial theme on page load
  const setInitialTheme = () => {
    let html = document.querySelector("html");
    let themeToggle = document.querySelector(".theme-toggle");
    let theme = window.localStorage.getItem("theme");

    if (theme === "dark") {
      html.classList.add("dark");
      themeToggle.classList.add("fa-sun");
    } else {
      themeToggle.classList.add("fa-moon");
    }
  };

  // Attach event listener for theme toggle
  document.addEventListener("DOMContentLoaded", function() {
    setInitialTheme();
    document.querySelector(".theme-toggle").addEventListener("click", toggleTheme);
  });
</script>
